/* Copyright 2023 iluci
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

#include <stdio.h>
#include QMK_KEYBOARD_H
#include "keymap.h"
#include "core.h"
#include "os/os.h"
#include "keymap.h"

extern uint8_t os_mode;

// clang-format off

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
    // [_LAYER] = LAYOUT(
    //     /*
    //     *   .-----------------------------------------------------------.                               .-----------------------------------------------------------.
    //     *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |                               | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    //     *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
    //     *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |                               | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    //     *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
    //     *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |                               | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    //     *   |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
    //     *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |           | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    //     *   '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
    //     *                   | XXXXXXX | XXXXXXX  | XXXXXXX | XXXXXXX | / XXXXXXX /             \ XXXXXXX \  | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    //     *                   '---------------------------------------------------'               '---------------------------------------------------'
    //     */
    //     //  .-----------------------------------------------------------.                               .-----------------------------------------------------------.
    //           XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX ,                                 XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX ,
    //     //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
    //           XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX ,                                 XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX ,
    //     //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
    //           XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX ,                                 XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX ,
    //     //  |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
    //           XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX ,             XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX ,
    //     //  '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
    //                           XXXXXXX , XXXXXXX  , XXXXXXX , XXXXXXX ,   XXXXXXX ,               XXXXXXX ,    XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX
    //     //                  '--------------------------------- ------------------'              '---------------------------------------------------'
    // ),
    [_QWRTY] = LAYOUT(
    /*
    *   .-----------------------------------------------------------.                               .-----------------------------------------------------------.
    *   |   ESC   |    1    |    2    |    3    |    4    |    5    |                               |    6    |    7    |    8    |    9    |   10    |  BSPC   |
    *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
    *   |   TAB   |    Q    |    W    |    E    |    R    |    T    |                               |    Y    |    U    |    I    |    O    |    P    |    \    |
    *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
    *   |   CAPS  |    A    |    S    |    D    |    F    |    G    |                               |    H    |    J    |    K    |    L    |    ;    |    '    |
    *   |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
    *   |  LShift |    Z    |    X    |    C    |    V    |    B    |   MUTE  |           | XXXXXXX |    N    |    M    |    ,    |    .    |    /    |  RShift |
    *   '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
    *                   |  LCtrl  |  LGui   |  LAlt    |  LOWER  | /  SPACE  /             \  ENTER  \  |  RAISE  | TG(_NUM)|    [    |    ]    |
    *                   '---------------------------------------------------'               '---------------------------------------------------'
    */
    //  .-----------------------------------------------------------.                               .-----------------------------------------------------------.
          KC_ESC  ,  KC_1   ,  KC_2   ,  KC_3   ,  KC_4   ,  KC_5   ,                                  KC_6   ,  KC_7   ,  KC_8   ,  KC_9   ,  KC_0   , KC_BSPC ,
    //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
          KC_TAB  ,  KC_Q   ,  KC_W   ,  KC_E   ,  KC_R   ,  KC_T   ,                                  KC_Y   ,  KC_U   ,  KC_I   ,  KC_O   ,  KC_P   , KC_BSLS ,
    //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
          KC_CAPS ,  KC_A   ,  KC_S   ,  KC_D   ,  KC_F   ,  KC_G   ,                                  KC_H   ,  KC_J   ,  KC_K   ,  KC_L   , KC_SCLN , KC_QUOT ,
    //  |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
          KC_LSFT ,  KC_Z   ,  KC_X   ,  KC_C   ,  KC_V   ,  KC_B   , KC_MUTE ,             XXXXXXX ,  KC_N   ,  KC_M   , KC_COMM ,  KC_DOT , KC_SLSH , KC_RSFT ,
    //  '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
                           KC_LCTL ,  KC_LGUI , KC_LALT , KC_LOWER ,  KC_SPC ,                KC_ENT  ,  KC_RAISE , TG(_NUM), KC_LBRC , KC_RBRC
    //                  '--------------------------------- ------------------'              '---------------------------------------------------'
    ),
    [_CLMK] = LAYOUT(
    /*
    *   .-----------------------------------------------------------.                               .-----------------------------------------------------------.
    *   |   ESC   |    1    |    2    |    3    |    4    |    5    |                               |    6    |    7    |    8    |    9    |   10    |  BSPC   |
    *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
    *   |   TAB   |    Q    |    W    |    E    |    R    |    T    |                               |    Y    |    U    |    I    |    O    |    P    |    \    |
    *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
    *   | XXXXXXX |    A    |    S    |    D    |    F    |    G    |                               |    H    |    J    |    K    |    L    |    ;    |    '    |
    *   |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
    *   |  LShift |    Z    |    X    |    C    |    V    |    B    |   MUTE  |           | XXXXXXX |    N    |    M    |    ,    |    .    |    /    |  RShift |
    *   '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
    *                   |  LCtrl  |  LGui   |  LAlt    |  LOWER  | /  SPACE  /             \  ENTER  \  |  RAISE  | TG(_NUM)|    [    |    ]    |
    *                   '---------------------------------------------------'               '---------------------------------------------------'
    */
    //  .-----------------------------------------------------------.                               .-----------------------------------------------------------.
          KC_ESC  ,  KC_1   ,  KC_2   ,  KC_3   ,  KC_4   ,  KC_5   ,                                  KC_6   ,  KC_7   ,  KC_8   ,  KC_9   ,  KC_0   , KC_BSPC ,
    //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
          KC_TAB  ,  KC_Q   ,  KC_W   ,  KC_F   ,  KC_P   ,  KC_G   ,                                  KC_J   ,  KC_L   ,  KC_U   ,  KC_Y   , KC_SCLN , KC_BSLS ,
    //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
          XXXXXXX ,  KC_A   ,  KC_R   ,  KC_S   ,  KC_T   ,  KC_D   ,                                  KC_H   ,  KC_N   ,  KC_E   ,  KC_I   ,  KC_O   , KC_QUOT ,
    //  |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
          KC_LSFT ,  KC_Z   ,  KC_X   ,  KC_C   ,  KC_V   ,  KC_B   , KC_MUTE ,             XXXXXXX ,  KC_B   ,  KC_M   , KC_COMM ,  KC_DOT , KC_SLSH , KC_RSFT ,
    //  '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
                           KC_LCTL ,  KC_LGUI , KC_LALT , KC_LOWER ,  KC_SPC ,                KC_ENT  ,  KC_RAISE , TG(_NUM), KC_LBRC , KC_RBRC
    //                  '--------------------------------- ------------------'              '---------------------------------------------------'
    ),
    [_LOWER] = LAYOUT(
    /*
    *   .-----------------------------------------------------------.                               .-----------------------------------------------------------.
    *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |                               | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
    *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |                               | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
    *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |                               | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    *   |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
    *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |           | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    *   '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
    *                   | XXXXXXX | XXXXXXX  | XXXXXXX | XXXXXXX | / XXXXXXX /             \ XXXXXXX \  | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    *                   '---------------------------------------------------'               '---------------------------------------------------'
    */
    //  .-----------------------------------------------------------.                               .-----------------------------------------------------------.
          XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX ,                                 XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX ,
    //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
          XXXXXXX , XXXXXXX , KC_BTN1 , KC_MS_U , KC_BTN1 , KC_WH_U ,                                 XXXXXXX , XXXXXXX ,  KC_UP  , XXXXXXX , KC_PSCR , XXXXXXX ,
    //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
          XXXXXXX , XXXXXXX , KC_MS_L , KC_MS_D , KC_MS_R , KC_WH_D ,                                 XXXXXXX , KC_LEFT , KC_DOWN , KC_RIGHT, XXXXXXX , XXXXXXX ,
    //  |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
          XXXXXXX , XXXXXXX , XXXXXXX , KC_CALC , XXXXXXX , XXXXXXX , XXXXXXX ,             XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , KC_MPLY , XXXXXXX , XXXXXXX ,
    //  '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
                          XXXXXXX , XXXXXXX  , XXXXXXX , _______ ,   XXXXXXX ,               XXXXXXX ,    _______ , _______ , KC_MPRV , KC_MNXT
    //                  '--------------------------------- ------------------'              '---------------------------------------------------'
    ),
    [_RAISE] = LAYOUT(
    /*
    *   .-----------------------------------------------------------.                               .-----------------------------------------------------------.
    *   |    `    |   F1    |   F2    |   F3    |   F4    |   F5    |                               |   F6    |   F7    |   F8    |   F9    |  F10    |   DEL   |
    *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
    *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |                               | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
    *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |                               | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    *   |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
    *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |           | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    *   '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
    *                   | XXXXXXX | XXXXXXX  | XXXXXXX | XXXXXXX | / XXXXXXX /             \ XXXXXXX \  | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    *                   '---------------------------------------------------'               '---------------------------------------------------'
    */
    //  .-----------------------------------------------------------.                               .-----------------------------------------------------------.
          KC_GRV  ,  KC_F1  ,  KC_F2  ,  KC_F3  ,  KC_F4  ,  KC_F5  ,                                  KC_F6  ,  KC_F7  ,  KC_F8  ,  KC_F9  , KC_F10  , KC_DEL  ,
    //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
          XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , KC_PGUP ,                                 KC_HOME , XXXXXXX , XXXXXXX , KC_MINS , KC_EQL  , XXXXXXX ,
    //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
          KC_APP  , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , KC_PGDN ,                                 KC_END  , XXXXXXX , XXXXXXX , KC_F11  , KC_F12  , XXXXXXX ,
    //  |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
          XXXXXXX , XXXXXXX , XXXXXXX , KC_CPNL , XXXXXXX , KC_PAUS , XXXXXXX ,             XXXXXXX , KC_INS  , XXXXXXX , KC_BRID , KC_BRIU , XXXXXXX , XXXXXXX ,
    //  '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
                          XXXXXXX , XXXXXXX  , XXXXXXX , _______ ,   XXXXXXX ,               XXXXXXX ,    _______ , _______ , XXXXXXX , XXXXXXX
    //                  '--------------------------------- ------------------'              '---------------------------------------------------'
    ),
    [_ADJST] = LAYOUT(
    /*
    *   .-----------------------------------------------------------.                               .-----------------------------------------------------------.
    *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |                               | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
    *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |                               | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
    *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |                               | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    *   |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
    *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |           | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    *   '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
    *                   | XXXXXXX | XXXXXXX  | XXXXXXX | XXXXXXX | / XXXXXXX /             \ XXXXXXX \  | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
    *                   '---------------------------------------------------'               '---------------------------------------------------'
    */
    //  .-----------------------------------------------------------.                               .-----------------------------------------------------------.
           SH_TG  , OS_DEF  , OS_WIN  , OS_MAC  , XXXXXXX , XXXXXXX ,                                 XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , QK_BOOT ,
    //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
          XXXXXXX , KC_QWRTY, KC_CLMK , XXXXXXX , XXXXXXX , XXXXXXX ,                                 XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , QK_RBT  ,
    //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
          RGB_TOG , RGB_MOD , RGB_VAI, RGB_HUI , RGB_SAI ,  KC_CLMK ,                                 BL_TOGG , BL_STEP ,  BL_UP  , XXXXXXX , XXXXXXX , EE_CLR  ,
    //  |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
          XXXXXXX , RGB_RMOD, RGB_VAD, RGB_HUD , RGB_SAD ,  KC_QWRTY, XXXXXXX ,             XXXXXXX , XXXXXXX , BL_BRTG , BL_DOWN , XXXXXXX , XXXXXXX , XXXXXXX ,
    //  '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
                          XXXXXXX , XXXXXXX  , XXXXXXX , _______ ,   XXXXXXX ,               XXXXXXX ,    _______ , _______ , XXXXXXX , XXXXXXX
    //                  '--------------------------------- ------------------'              '---------------------------------------------------'
    ),
    [_NUM] = LAYOUT(
        /*
        *   .-----------------------------------------------------------.                               .-----------------------------------------------------------.
        *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |                               | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
        *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
        *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |                               | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
        *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
        *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |                               | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
        *   |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
        *   | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |           | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
        *   '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
        *                   | XXXXXXX | XXXXXXX  | XXXXXXX | XXXXXXX | / XXXXXXX /             \ XXXXXXX \  | XXXXXXX | XXXXXXX | XXXXXXX | XXXXXXX |
        *                   '---------------------------------------------------'               '---------------------------------------------------'
        */
        //  .-----------------------------------------------------------.                               .-----------------------------------------------------------.
             TG(_NUM) , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX ,                                 XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX ,
        //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
              XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX ,                                 KC_CIRC ,  KC_P7  ,  KC_P8  ,  KC_P9  , KC_ASTR , XXXXXXX ,
        //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
              XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX ,                                 KC_MINS ,  KC_P4  ,  KC_P5  ,  KC_P6  , KC_EQL  , KC_PIPE ,
        //  |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
              XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX , XXXXXXX ,             XXXXXXX , KC_PLUS ,  KC_P1  ,  KC_P2  ,  KC_P3  , KC_SLSH , XXXXXXX ,
        //  '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
                              XXXXXXX , XXXXXXX  , XXXXXXX , _______ ,   XXXXXXX ,               XXXXXXX ,    _______ , TG(_NUM),  KC_P0  , KC_PDOT
        //                  '--------------------------------- ------------------'              '---------------------------------------------------'
    ),
};

#ifdef RGB_MATRIX_ENABLE
#undef _______
#define _______ LED_TRANS

const led_map_t PROGMEM led_map[][RGBLED_NUM] = {
    // [_LAYER] = LED_MAP_LAYOUT(
    //     /*
    //     *   .-----------------------------------------------------------.                               .-----------------------------------------------------------.
    //     *   |   ESC   |    1    |    2    |    3    |    4    |    5    |                               |    6    |    7    |    8    |    9    |   10    |  BSPC   |
    //     *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
    //     *   |   TAB   |    Q    |    W    |    E    |    R    |    T    |                               |    Y    |    U    |    I    |    O    |    P    |    \    |
    //     *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
    //     *   |  LCTR   |    A    |    S    |    D    |    F    |    G    |                               |    H    |    J    |    K    |    L    |    ;    |    '    |
    //     *   |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
    //     *   |  LShift |    Z    |    X    |    C    |    V    |    B    |         |           |         |    N    |    M    |    ,    |    .    |    /    |  RShift |
    //     *   '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
    //     *                   |  LGui   |  LAlt    | XXXXXXX |  LOWER  | /  SPACE  /             \  ENTER  \  |  RAISE  | XXXXXXX |    [    |    ]    |
    //     *                   '---------------------------------------------------'               '---------------------------------------------------'
    //     */
    //     //  .-----------------------------------------------------------.                               .-----------------------------------------------------------.
    //           _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
    //     //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
    //           _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
    //     //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
    //           _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
    //     //  |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
    //           _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
    //     //  '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
    //                           _______ , _______  , _______ , _______ ,   _______ ,               _______ ,    _______ , _______ , _______ , _______
    //     //                  '--------------------------------- ------------------'              '---------------------------------------------------'
    // ),
    [_QWRTY] = LED_MAP_LAYOUT(
        /*
        *   .-----------------------------------------------------------.                               .-----------------------------------------------------------.
        *   |   ESC   |    1    |    2    |    3    |    4    |    5    |                               |    6    |    7    |    8    |    9    |   10    |  BSPC   |
        *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
        *   |   TAB   |    Q    |    W    |    E    |    R    |    T    |                               |    Y    |    U    |    I    |    O    |    P    |    \    |
        *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
        *   |  LCTR   |    A    |    S    |    D    |    F    |    G    |                               |    H    |    J    |    K    |    L    |    ;    |    '    |
        *   |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
        *   |  LShift |    Z    |    X    |    C    |    V    |    B    |         |           |         |    N    |    M    |    ,    |    .    |    /    |  RShift |
        *   '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
        *                   |  LGui   |  LAlt    | XXXXXXX |  LOWER  | /  SPACE  /             \  ENTER  \  |  RAISE  | XXXXXXX |    [    |    ]    |
        *                   '---------------------------------------------------'               '---------------------------------------------------'
        */
        //  .-----------------------------------------------------------.                               .-----------------------------------------------------------.
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
                              _______ , _______  , _______ , _______ ,   _______ ,               _______ ,    _______ , _______ , _______ , _______
        //                  '--------------------------------- ------------------'              '---------------------------------------------------'
    ),
    [_CLMK] = LED_MAP_LAYOUT(
        /*
        *   .-----------------------------------------------------------.                               .-----------------------------------------------------------.
        *   |   ESC   |    1    |    2    |    3    |    4    |    5    |                               |    6    |    7    |    8    |    9    |   10    |  BSPC   |
        *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
        *   |   TAB   |    Q    |    W    |    E    |    R    |    T    |                               |    Y    |    U    |    I    |    O    |    P    |    \    |
        *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
        *   |  LCTR   |    A    |    S    |    D    |    F    |    G    |                               |    H    |    J    |    K    |    L    |    ;    |    '    |
        *   |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
        *   |  LShift |    Z    |    X    |    C    |    V    |    B    |         |           |         |    N    |    M    |    ,    |    .    |    /    |  RShift |
        *   '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
        *                   |  LGui   |  LAlt    | XXXXXXX |  LOWER  | /  SPACE  /             \  ENTER  \  |  RAISE  | XXXXXXX |    [    |    ]    |
        *                   '---------------------------------------------------'               '---------------------------------------------------'
        */
        //  .-----------------------------------------------------------.                               .-----------------------------------------------------------.
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
                              _______ , _______  , _______ , _______ ,   _______ ,               _______ ,    _______ , _______ , _______ , _______
        //                  '--------------------------------- ------------------'              '---------------------------------------------------'
    ),
    [_LOWER] = LED_MAP_LAYOUT(
        /*
        *   .-----------------------------------------------------------.                               .-----------------------------------------------------------.
        *   |   ESC   |    1    |    2    |    3    |    4    |    5    |                               |    6    |    7    |    8    |    9    |   10    |  BSPC   |
        *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
        *   |   TAB   |    Q    |    W    |    E    |    R    |    T    |                               |    Y    |    U    |    I    |    O    |    P    |    \    |
        *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
        *   |  LCTR   |    A    |    S    |    D    |    F    |    G    |                               |    H    |    J    |    K    |    L    |    ;    |    '    |
        *   |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
        *   |  LShift |    Z    |    X    |    C    |    V    |    B    |         |           |         |    N    |    M    |    ,    |    .    |    /    |  RShift |
        *   '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
        *                   |  LGui   |  LAlt    | XXXXXXX |  LOWER  | /  SPACE  /             \  ENTER  \  |  RAISE  | XXXXXXX |    [    |    ]    |
        *                   '---------------------------------------------------'               '---------------------------------------------------'
        */
        //  .-----------------------------------------------------------.                               .-----------------------------------------------------------.
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
                              _______ , _______  , _______ , _______ ,   _______ ,               _______ ,    _______ , _______ , _______ , _______
        //                  '--------------------------------- ------------------'              '---------------------------------------------------'
    ),
    [_RAISE] = LED_MAP_LAYOUT(
        /*
        *   .-----------------------------------------------------------.                               .-----------------------------------------------------------.
        *   |   ESC   |    1    |    2    |    3    |    4    |    5    |                               |    6    |    7    |    8    |    9    |   10    |  BSPC   |
        *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
        *   |   TAB   |    Q    |    W    |    E    |    R    |    T    |                               |    Y    |    U    |    I    |    O    |    P    |    \    |
        *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
        *   |  LCTR   |    A    |    S    |    D    |    F    |    G    |                               |    H    |    J    |    K    |    L    |    ;    |    '    |
        *   |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
        *   |  LShift |    Z    |    X    |    C    |    V    |    B    |         |           |         |    N    |    M    |    ,    |    .    |    /    |  RShift |
        *   '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
        *                   |  LGui   |  LAlt    | XXXXXXX |  LOWER  | /  SPACE  /             \  ENTER  \  |  RAISE  | XXXXXXX |    [    |    ]    |
        *                   '---------------------------------------------------'               '---------------------------------------------------'
        */
        //  .-----------------------------------------------------------.                               .-----------------------------------------------------------.
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
                              _______ , _______  , _______ , _______ ,   _______ ,               _______ ,    _______ , _______ , _______ , _______
        //                  '--------------------------------- ------------------'              '---------------------------------------------------'
    ),
    [_ADJST] = LED_MAP_LAYOUT(
        /*
        *   .-----------------------------------------------------------.                               .-----------------------------------------------------------.
        *   |   ESC   |    1    |    2    |    3    |    4    |    5    |                               |    6    |    7    |    8    |    9    |   10    |  BSPC   |
        *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
        *   |   TAB   |    Q    |    W    |    E    |    R    |    T    |                               |    Y    |    U    |    I    |    O    |    P    |    \    |
        *   |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
        *   |  LCTR   |    A    |    S    |    D    |    F    |    G    |                               |    H    |    J    |    K    |    L    |    ;    |    '    |
        *   |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
        *   |  LShift |    Z    |    X    |    C    |    V    |    B    |         |           |         |    N    |    M    |    ,    |    .    |    /    |  RShift |
        *   '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
        *                   |  LGui   |  LAlt    | XXXXXXX |  LOWER  | /  SPACE  /             \  ENTER  \  |  RAISE  | XXXXXXX |    [    |    ]    |
        *                   '---------------------------------------------------'               '---------------------------------------------------'
        */
        //  .-----------------------------------------------------------.                               .-----------------------------------------------------------.
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  |---------+---------+---------+---------+---------+---------|                               |---------+---------+---------+---------+---------+---------|
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  |---------+---------+---------+---------+---------+---------|---------.           .---------|---------+---------+---------+---------+---------+---------|
              _______ , _______ , _______ , _______ , _______ , _______ ,                                 _______ , _______ , _______ , _______ , _______ , _______ ,
        //  '-----------------------------------------------------------/---------/           \---------\-----------------------------------------------------------'
                              _______ , _______  , _______ , _______ ,   _______ ,               _______ ,    _______ , _______ , _______ , _______
        //                  '--------------------------------- ------------------'              '---------------------------------------------------'
    ),
};

#undef _______
#define _______ KC_TRNS
#endif

// clang-format on

bool process_record_user_keymap(uint16_t keycode, keyrecord_t *record) {
    switch (keycode) {
        case KC_QWRTY:
            if (record->event.pressed) {
                set_single_persistent_default_layer(_QWRTY);
            }
            return false;
        case KC_CLMK:
            if (record->event.pressed) {
                set_single_persistent_default_layer(_CLMK);
            }
            return false;
        case KC_LOWER:
            if (record->event.pressed) {
                layer_on(_LOWER);
                update_tri_layer(_LOWER, _RAISE, _ADJST);
            } else {
                layer_off(_LOWER);
                update_tri_layer(_LOWER, _RAISE, _ADJST);
            }
            return false;
        case KC_RAISE:
            if (record->event.pressed) {
                layer_on(_RAISE);
                update_tri_layer(_LOWER, _RAISE, _ADJST);
            } else {
                layer_off(_RAISE);
                update_tri_layer(_LOWER, _RAISE, _ADJST);
            }
            return false;
        case KC_ADJST:
            if (record->event.pressed) {
                layer_on(_ADJST);
            } else {
                layer_off(_ADJST);
            }
            return false;
    }
    return true;
}

#ifdef OLED_ENABLE

oled_rotation_t oled_init_user(oled_rotation_t rotation) {
    return OLED_ROTATION_270;
}

static void print_primary(void) {
    oled_write_P(PSTR("Sofle"), false);
    oled_write_P(PSTR("\n\n"), false);
    switch (get_highest_layer(default_layer_state)) {
        case _QWRTY:
            oled_write_P(PSTR("QWRTY"), false);
            break;
        case _CLMK:
            oled_write_P(PSTR("CLMK "), false);
            break;
        default:
            oled_write_P(PSTR("UNDEF"), false);
    }
    oled_write_P(PSTR("\n\n"), false);
    oled_write_P(PSTR("OS   "), false);
    switch (os_mode) {
        case OS_MODE_WIN:
            oled_write_P(PSTR("Win  "), false);
            break;
        case OS_MODE_MAC:
            oled_write_P(PSTR("Mac  "), false);
            break;
        default:
            oled_write_P(PSTR("Def  "), false);
    }
    oled_write_P(PSTR("\n\n"), false);
    oled_write_P(PSTR("Layer"), false);
    switch (get_highest_layer(layer_state)) {
        case _QWRTY:
        case _CLMK:
            oled_write_P(PSTR("Base "), false);
            break;
        case _RAISE:
            oled_write_P(PSTR("Raise"), false);
            break;
        case _LOWER:
            oled_write_P(PSTR("Lower"), false);
            break;
        case _ADJST:
            oled_write_P(PSTR("Adjst"), false);
            break;
        case _NUM:
            oled_write_P(PSTR("Num  "), false);
            break;
        default:
            oled_write_P(PSTR("UNDEF"), false);
    }
    oled_write_P(PSTR("\n\n"), false);
    led_t led_usb_state = host_keyboard_led_state();
    oled_write_P(PSTR("CPSLK"), led_usb_state.caps_lock);
}

static void print_secondary(void) {}

bool oled_task_user(void) {
    if (is_keyboard_master()) {
        print_primary();
    } else {
        print_secondary();
    }
    return false;
}

#endif
